<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âøç„Åü„ÅæÂ§™ÈÉé„ÇØ„Ç§„Ç∫</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Âøç„Åü„ÅæÂ§™ÈÉé„ÇØ„Ç§„Ç∫</h1>
            <div class="hamburger-menu">
                <button class="hamburger-btn" onclick="toggleHamburgerMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div id="hamburger-dropdown" class="hamburger-dropdown">
                    <div id="guest-menu" class="menu-section">
                        <button id="login-btn" onclick="showLoginModal()">„É≠„Ç∞„Ç§„É≥</button>
                    </div>
                    <div id="user-menu" class="menu-section" style="display: none;">
                        <div class="user-info">
                            <span id="user-name">„É¶„Éº„Ç∂„ÉºÂêç</span>
                        </div>
                        <button id="logout-btn" onclick="logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
                    </div>
                    <div class="menu-separator"></div>
                    <button id="ranking-btn" onclick="showRanking()">„É©„É≥„Ç≠„É≥„Ç∞</button>
                </div>
            </div>
        </header>


        <div id="quiz-section">
            <div id="quiz-container">
                <div id="question-section">
                    <h2 id="question"></h2>
                    <div id="options"></div>
                    <button id="submit-btn" onclick="checkAnswer()">ÂõûÁ≠î</button>
                </div>
                <div id="result-section" style="display: none;">
                    <h2 id="result-message"></h2>
                    <button id="next-btn" onclick="nextQuestion()">Ê¨°„ÅÆÂïèÈ°å</button>
                </div>
                <div id="complete-section" style="display: none;">
                    <h2>üéâ „Ç≥„É≥„Éó„É™„Éº„ÉàÔºÅ üéâ</h2>
                    <p id="final-score"></p>
                    <div id="score-save-section">
                        <input type="text" id="player-name" placeholder="„Éó„É¨„Ç§„É§„ÉºÂêç„ÇíÂÖ•ÂäõÔºà‰ªªÊÑèÔºâ" maxlength="20">
                        <button onclick="saveScore()">„Çπ„Ç≥„Ç¢„Çí‰øùÂ≠ò</button>
                    </div>
                    <button onclick="restartQuiz()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶</button>
                </div>
            </div>
            <div class="progress">
                <span id="progress-text">ÂïèÈ°å 1 / 3</span>
            </div>
        </div>

        <div id="ranking-section" class="section" style="display: none;">
            <div class="section-header">
                <h2>„É©„É≥„Ç≠„É≥„Ç∞</h2>
                <button class="back-btn" onclick="showQuiz()">„ÇØ„Ç§„Ç∫„Å´Êàª„Çã</button>
            </div>
            <div id="ranking-list">
                <div class="loading">„É©„É≥„Ç≠„É≥„Ç∞„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
            </div>
        </div>
    </div>

    <!-- „É≠„Ç∞„Ç§„É≥„É¢„Éº„ÉÄ„É´ -->
    <div id="login-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal('login-modal')">&times;</span>
            <h2>„É≠„Ç∞„Ç§„É≥</h2>
            
            <!-- Google OAuth „É≠„Ç∞„Ç§„É≥ -->
            <div class="oauth-section">
                <button type="button" id="google-login-btn" class="google-btn" onclick="loginWithGoogle()">
                    <svg width="18" height="18" viewBox="0 0 48 48" style="margin-right: 8px;">
                        <path fill="#EA4335" d="M24 9.5c3.3 0 6.2 1.2 8.5 3.1l6.3-6.3C34.7 2.5 29.7 0 24 0 14.6 0 6.8 5.9 4.2 14.1l7.3 5.7C13.3 13.4 18.2 9.5 24 9.5z"/>
                        <path fill="#4285F4" d="M46.1 24.5c0-1.6-.1-3.1-.4-4.5H24v9h12.7c-.6 3.1-2.4 5.7-5 7.4l7.7 6c4.5-4.2 7.1-10.4 7.1-17.9z"/>
                        <path fill="#FBBC05" d="M11.5 28.2c-.9-2.7-.9-5.7 0-8.4l-7.3-5.7C1.5 18.2 0 21 0 24s1.5 5.8 4.2 10.1l7.3-5.9z"/>
                        <path fill="#34A853" d="M24 48c5.7 0 10.7-1.9 14.3-5.2l-7.7-6c-2.1 1.4-4.8 2.2-6.6 2.2-5.8 0-10.7-3.9-12.5-9.2l-7.3 5.7C6.8 42.1 14.6 48 24 48z"/>
                    </svg>
                    Google„Åß„É≠„Ç∞„Ç§„É≥
                </button>
            </div>
        </div>
    </div>

    <script src="quiz-data.js"></script>
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>